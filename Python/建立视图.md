### 建立视图
在MVT模式中，视图用来管理对业务的调用以及对模版的渲染
在视图`views.py`中，必须要返回`HttpResponse` 对象或者`Http404`对象
基本结构：
```
    from django.http import HttpResponse

    def index(request):
        return HttpResponse(output)
```
在满足基本结构的基础上，可以作任何事情

### 在路由和视图之间建立调用关系
1. 创建`urls.py`模块,建立URLconf。
基本结构：
```
    from django.urls import path
    from . import views  #引入对应的视图模块

    urlpatterns = [
        path('',views.index,name="index"),
    
    ]
```

2. 在根URLconf建立，并关联到对应的应用程序模块，对url路径进行进一步的处理。
```
    from django.contrib import admin
    from django.urls import path
    from django.conf.urls import include,url 

    urlpatterns = [
        url(r'^firstpoll/',include('firstPoll.urls'))  # 通过include引入对应的url模块
    ]
```

### 视图中使用模板
1. 在应用程序目录里面新建模板目录`templates`,依次建立对应视图所需要的模板,最终结构为`templates/[模板路径]`

2. 在视图中引入模板
- 基本方式：
```
    from django.template import loader
    from django.http import HttpResponse 

    def index(request):
        latest_question_list = [
            {'id':1,'question_text':"测试1"},
            {'id':2,'question_text':"测试2"}
        ]
        template = loader.get_template("firstPoll/index.html")
        context = {
            'latest_question_list': latest_question_list,
        }
        return HttpResponse(template.render(context, request))
```
`firstPoll/index.html` 为模板路径
`loader`模块用来引入模板

- 使用快捷方式
```
from django.shortcuts import render
from django.http import HttpResponse, request 


def detail(request,question_id):
    latest_question_list = [{'id':question_id,'question_text':"测试3"},{'id':question_id,'question_text':"测试4"}]
    context = {
        'latest_question_list': latest_question_list,
    }
    return HttpResponse(render(request,'firstPoll/index.html',context))

```
通过`render`模块，直接引用`firstPoll/index.html`模板，避免多一层`loader`的模块

### 返回错误页面
1. 基本结构
```
    from django.http import HttpResponse, request,Http404

    def volt(request,question_id,questions_id):
        try:
            que = question.objects.get(id)
        except:
            raise Http404("错误xx")
        return HttpResponse(render(request,'firstPoll/detail.html',{'question': que}))
```
    - 使用`raise`抛出Http404异常
    - 测试环境和实际环境跳出的错误页面不一致，需要到`setting.py`进行设置

2. 快捷结构
```
    from django.shortcuts import get_object_or_404

    def volt(request,question_id,questions_id):
        que = get_object_or_404(question,id)
        return HttpResponse(render(request,'firstPoll/detail.html',{'question': que}))
```
    - 通过`get_object_or_404`方法来进行封装，如果无法获得对象则抛出错误框。
    - 同样的方法有`get_list_or_404()`